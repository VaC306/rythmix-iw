<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>IW 2024-25</title>
    <th:block th:fragment="header">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" th:href="@{/css/bootstrap-5.3.3.css}" href="css/bootstrap-5.3.3.css" type="text/css" />
        <link rel="stylesheet" th:href="@{/css/custom.css}" href="css/custom.css" type="text/css" />
        <link rel="icon" th:href="@{/img/favicon.ico}" href="/img/favicon.ico" type="image/x-icon">
        <script type="text/javascript">
            const config = {
                socketUrl: "[[${ws}?:'']]", // empty is false, will result in no WS being opened
                rootUrl: "[[${url}?:'']]",
                csrf: {
                    name: "[[${_csrf.parameterName}]]",
                    value: "[[${_csrf.token}]]"
                },
                admin: "[[${u != null && u.hasRole('ADMIN')} ? true : false]]",
                userId: +"[[${u != null} ? ${u.id} : -1]]",
                topics: "[[${topics}?:'']]",
            };
            config.admin = config.admin == "true"; // ensure boolean
            
            // Add theme toggle JavaScript here
            (function() {
                // Theme management
                const themeManager = {
                    init() {
                        this.themeToggle = document.getElementById('themeToggle');
                        this.themeIcon = document.getElementById('themeIcon');
                        this.themeText = document.getElementById('themeText');
                        
                        if (!this.themeToggle) return; // Exit if toggle doesn't exist
                        
                        // Check for saved theme preference
                        const savedTheme = localStorage.getItem('theme') || 'light';
                        this.setTheme(savedTheme);
                        
                        // Add event listener
                        this.themeToggle.addEventListener('click', () => this.toggleTheme());
                    },
                    
                    setTheme(theme) {
                        document.documentElement.setAttribute('data-theme', theme);
                        localStorage.setItem('theme', theme);
                        
                        // Update button text/icon
                        if (this.themeIcon && this.themeText) {
                            if (theme === 'dark') {
                                this.themeIcon.textContent = 'â˜€ï¸';
                                this.themeText.textContent = 'Light';
                            } else {
                                this.themeIcon.textContent = 'ğŸŒ™';
                                this.themeText.textContent = 'Dark';
                            }
                        }
                    },
                    
                    toggleTheme() {
                        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                        this.setTheme(newTheme);
                    }
                };

                // Initialize when DOM is ready
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => themeManager.init());
                } else {
                    themeManager.init();
                }
            })();
        </script>
    </th:block>
</head>

<body>
    Head fragment - rest intentionally left empty.
</body>

</html>